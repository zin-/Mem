name: 'Unit test'
inputs:
  codecov-token:
    required: true
runs:
  using: "composite"
  steps:
    - name: 'Flutter Doctor'
      run: flutter doctor -v
      shell: bash
    - name: 'Unit test'
      run: flutter test --coverage --coverage-path=./coverage/lcov-unit_test.info
      shell: bash
    - name: 'Upload coverage'
      uses: codecov/codecov-action@v3
      with:
        token: ${{ inputs.codecov-token }}
        files: ./coverage/lcov-unit_test.info
        flags: unit_test
